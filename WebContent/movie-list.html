<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top 20 Rated Movies</title>
  <style>
    body {
      background-color: rosybrown;
      color: white;
    }
    a {
      color: white;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
<h1>Top 20 Rated Movies</h1>
<table border="1" cellpadding="8">
  <thead>
  <tr>
    <th>Title</th>
    <th>Year</th>
    <th>Director</th>
    <th>Genres</th>
    <th>Stars</th>
    <th>Rating</th>
  </tr>
  </thead>
  <tbody id="movie-table-body"></tbody>
</table>

<script>
  fetch("api/movies")
          .then(response => response.json())
          .then(data => {
            const tbody = document.getElementById("movie-table-body");
            data.forEach(movie => {
              const row = document.createElement("tr");
              row.innerHTML = `
                <td><a href="single-movie.html?id=${movie.id}">${movie.title}</a></td>
                <td>${movie.year}</td>
                <td>${movie.director}</td>
                <td>${movie.genres.join(", ")}</td>
                <td>${movie.stars.map(s => `<a href="single-star.html?id=${s.id}">${s.name}</a>`).join(", ")}</td>
                <td>${movie.rating}</td>
            `;
              tbody.appendChild(row);
            });
          })
          .catch(error => {
            document.body.innerHTML += `<p>Loading Error: ${error}</p>`;
          });
</script>
</body>
</html>
